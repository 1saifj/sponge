webpackJsonp([1],{"+Sv5":function(e,t){},"/GIC":function(e,t){},"1eUx":function(e,t){},"4czy":function(e,t){},"4nl6":function(e,t){},"7O3S":function(e,t){},"9BJs":function(e,t){},El04:function(e,t){},FNpW:function(e,t){},Fkcq:function(e,t){},FygU:function(e,t){},GxAc:function(e,t){},Hnfh:function(e,t){},I0o5:function(e,t){},IALf:function(e,t){},Ll2J:function(e,t){},MKpG:function(e,t){},N6Tf:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),i={name:"App",data:function(){return{isCollapse:!1,collapseSize:"300px",toggle:!1,block:!0,collapsebgcolor:"",dialogTableVisible:!1,logoImageSrc:o("hIB5"),logoImagePosition:"15%",wechatImageSrc:o("ebUW"),currentMenu:"/ui",languageOptions:[{value:"English",label:"English"},{value:"简体中文",label:"简体中文"}],languageValue:"简体中文",homeRoute:"/ui",webHttpRoute:"/ui/web-http",webHandlerRoute:"/ui/web-handler",webCacheRoute:"/ui/web-cache",webDaoRoute:"/ui/web-dao",webModelRoute:"/ui/web-model",microRPCRoute:"/ui/micro-rpc",microServiceRoute:"/ui/micro-service",microServiceHandlerRoute:"/ui/micro-service-handler",microRPCConnRoute:"/ui/micro-rpc-conn",microRPCPbRoute:"/ui/micro-rpc-pb",microGRPCHTTPPbRoute:"/ui/micro-grpc-http-pb",microRPCGwPbRoute:"/ui/micro-rpc-gw-pb",microProtobufRoute:"/ui/micro-protobuf",webHTTPPbRoute:"/ui/web-http-pb",yamlConfigRoute:"/ui/yaml-config",downloadCodeRoute:"/ui/download"}},watch:{$route:function(e){this.currentMenu=e.path}},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},created:function(){"en"==localStorage.getItem("localeLanguage")?(this.$i18n.locale="en",this.languageValue="English"):(this.$i18n.locale="cn",this.languageValue="简体中文"),this.adaptedRouteByLanguage(),this.currentMenu=this.$route.path,window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},handleSelect:function(e,t){},handleOpen:function(e,t){},handleClose:function(e,t){},clickHandle:function(e){},collapseStatus:function(){this.toggle=!this.toggle,this.block=!this.block,this.isCollapse=!this.isCollapse,this.isCollapse?(this.collapseSize="0px",this.logoImagePosition="0%"):(this.collapseSize="300px",this.logoImagePosition="15%")},changebgcolor:function(){this.collapsebgcolor="#66B1FF"},clearcolor:function(){this.collapsebgcolor=""},changeLanguage:function(e){this.languageValue=e,"简体中文"===e?(this.$i18n.locale="cn",localStorage.setItem("localeLanguage","cn")):(this.$i18n.locale="en",localStorage.setItem("localeLanguage","en")),this.adaptedRouteByLanguage(),this.$router.push(this.homeRoute),window.location.reload()},adaptedRouteByLanguage:function(){var e="";"en"==this.$i18n.locale&&(e="/en"),this.homeRoute=e+this.homeRoute.replace("/en",""),this.webHttpRoute=e+this.webHttpRoute.replace("/en",""),this.webHandlerRoute=e+this.webHandlerRoute.replace("/en",""),this.webCacheRoute=e+this.webCacheRoute.replace("/en",""),this.webDaoRoute=e+this.webDaoRoute.replace("/en",""),this.webModelRoute=e+this.webModelRoute.replace("/en",""),this.microRPCRoute=e+this.microRPCRoute.replace("/en",""),this.microRPCConnRoute=e+this.microRPCConnRoute.replace("/en",""),this.microRPCPbRoute=e+this.microRPCPbRoute.replace("/en",""),this.microGRPCHTTPPbRoute=e+this.microGRPCHTTPPbRoute.replace("/en",""),this.microRPCGwPbRoute=e+this.microRPCGwPbRoute.replace("/en",""),this.microServiceRoute=e+this.microServiceRoute.replace("/en",""),this.microServiceHandlerRoute=e+this.microServiceHandlerRoute.replace("/en",""),this.microProtobufRoute=e+this.microProtobufRoute.replace("/en",""),this.webHTTPPbRoute=e+this.webHTTPPbRoute.replace("/en",""),this.yamlConfigRoute=e+this.yamlConfigRoute.replace("/en",""),this.downloadCodeRoute=e+this.downloadCodeRoute.replace("/en","")},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0,this.logoImagePosition="0%"):(this.spanSize=16,this.offsetSize=4,this.logoImagePosition="15%")}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",[o("el-container",[o("el-header",{staticStyle:{height:"100px","border-bottom":"2px solid #eee"}},[o("div",{staticClass:"header-image",style:{"padding-left":e.logoImagePosition}},[o("el-image",{staticStyle:{height:"50px"},attrs:{src:e.logoImageSrc}})],1),e._v(" "),o("div",{staticClass:"menuControl",style:{"background-color":e.collapsebgcolor},on:{mouseenter:e.changebgcolor,mouseleave:e.clearcolor,click:e.collapseStatus}},[o("div",{staticStyle:{"text-align":"center","padding-top":"5px"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:e.block,expression:"block"}],staticClass:"el-icon-s-fold"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],staticClass:"el-icon-s-unfold"})])]),e._v(" "),o("div",{staticStyle:{float:"right","margin-top":"-20px"}},[o("el-select",{staticClass:"languageClass",on:{change:e.changeLanguage},model:{value:e.languageValue,callback:function(t){e.languageValue=t},expression:"languageValue"}},e._l(e.languageOptions,function(e){return o("el-option",{key:e.value,staticStyle:{"font-size":"medium"},attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),o("el-container",[o("el-aside",{staticClass:"aside-menu",attrs:{width:e.collapseSize}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"$router.currentRoute.path","default-active":e.currentMenu,collapse:e.isCollapse},on:{select:e.handleSelect,open:e.handleOpen,close:e.handleClose}},[o("el-menu-item",{attrs:{index:e.homeRoute}},[o("i",{staticClass:"el-icon-s-home"}),e._v(" "),o("span",{staticClass:"home-class",attrs:{slot:"title"},slot:"title"},[e._v("Home")])]),e._v(" "),o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-coin"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("SQL")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHttpRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttp"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpc"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-tickets"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Protobuf")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttpPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microrpcPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCGwPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcGwPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTPPb"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-suitcase"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Public")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.wehHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microService"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microServiceHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webDaoRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webDao"))+" ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microProtobuf"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webModelRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webModel"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.yamlConfigRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.yamlConfig"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCConnRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcConn"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webCacheRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webCache"))+"\n                ")])])],2)],1)],1),e._v(" "),o("el-container",[o("el-main",[o("router-view")],1),e._v(" "),o("el-footer",[o("div",{staticStyle:{"text-align":"center",position:"relative"}},[o("p",{staticStyle:{"font-style":"italic","font-size":"medium",color:"#666"}},[e._v("\n                "+e._s(e.$t("footer.text1"))+"\n                "),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("\n                  star⭐")]),e._v("\n                "+e._s(e.$t("footer.text2"))+"\n                "),o("el-button",{staticStyle:{"font-size":"medium"},attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v(e._s(e.$t("footer.text3")))])],1),e._v(" "),o("el-dialog",{attrs:{title:"加微信进群(标注sponge)",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[o("el-image",{staticStyle:{height:"320px"},attrs:{src:e.wechatImageSrc}})],1)],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var a=o("VU/8")(i,l,!1,function(e){o("Ll2J")},"data-v-f74ad42e",null).exports,s=o("/ocq"),n={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),mircoServiceFrameworkImageSrc:o("qynW")}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"50px","line-height":"150%"}},[e._v("\n      "+e._s(e.$t("home.text1"))+"\n    ")]),e._v(" "),o("p",[e._v("\n      "+e._s(e.$t("home.text2"))),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("https://github.com/zhufuyi/sponge")])]),e._v(" "),o("p",[e._v("\n      "+e._s(e.$t("home.text3"))),o("a",{attrs:{href:"https://go-sponge.com/zh-cn/",target:"_blank"}},[e._v("https://go-sponge.com/zh-cn/")])]),e._v(" "),o("p",[e._v("\n      "+e._s(e.$t("home.text3_1"))),o("a",{attrs:{href:"https://space.bilibili.com/1440482691/channel/series",target:"_blank"}},[e._v("https://space.bilibili.com/1440482691/channel/series")]),e._v(e._s(e.$t("home.text3_2"))+"\n    ")]),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text4")))]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text5")))]),e._v(" "),o("div",{staticClass:"microservices-image"},[o("el-image",{attrs:{src:e.mircoServiceFrameworkImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var d=o("VU/8")(n,c,!1,function(e){o("MKpG")},null,null).exports,m=o("mtWM"),p={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=document.createElement("a"),n=window.URL.createObjectURL(a);s.href=n,s.download=decodeURI(l),s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s),window.URL.revokeObjectURL(n),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"下载成功",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("使用帮助：")]),e._v(" "),o("div",{staticStyle:{padding:"5px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var v=o("VU/8")(p,u,!1,function(e){o("FNpW")},"data-v-4398b9d2",null).exports,b=o("bOdI"),f=o.n(b),h={name:"WebHTTP",data:function(){var e;return{title:"",path:"web-http",helpInfo:'\n      <p><b>⓵基于sql创建的web服务</b> 生成了包括了CRUD api的完整web服务后端代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/web-development-sql" target="_blank">web服务开发(sql)</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成swagger文档:  <b style="color: green">make docs</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>，测试 CRUD api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:(e={dsnAddr:"",dbDriver:"",tableName:[]},f()(e,"dbDriver",""),f()(e,"moduleName",""),f()(e,"serverName",""),f()(e,"projectName",""),f()(e,"repoAddr",""),f()(e,"embed",!1),f()(e,"suitedMonoRepo",!1),f()(e,"isExtendedApi",!1),e),rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},g={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/zh-cn/web-development-sql",target:"_blank"}},[e._v("⓵基于sql创建web服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          生成完整的web服务后端代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              以后如果需要添加新的CRUD代码，可以在菜单"),o("br"),o("b",[e._v("【Public】 -> 【生成handler CRUD代码】")]),o("br"),e._v("\n              中生成代码，然后移动到项目代码中。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var _=o("VU/8")(h,g,!1,function(e){o("GxAc")},"data-v-6f1961ea",null).exports,F={name:"WebHandler",data:function(){return{title:"生成handler CRUD代码",path:"web-handler",helpInfo1:'\n      <p>基于sql生成的handler代码，包含了http api的CRUD、分页查询、自定义条件查询、缓存等。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>internal</b>移动到一个<b>⓵基于sql创建的web服务</b>项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make docs</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>，测试 CRUD api。</p>\n      ',helpInfo2:'\n      <p>基于sql生成的protobuf和handler代码，包含了http api的CRUD、分页查询、自定义条件查询、缓存等。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>api</b>和<b>internal</b>移动到一个<b>⓷基于protobuf创建的web服务</b>项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 CRUDapi。</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"medium"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"protobuf类型"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果关闭，表示生成的handler\n              CRUD代码只适合"'),o("b",[e._v("⓵基于sql创建的web服务")]),e._v('"的项目代码，'),o("br"),e._v('\n              如果开启，表示生成的handler\n              CRUD代码只适合"'),o("b",[e._v("⓷基于protobuf创建的web服务")]),e._v('"的项目代码。\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var w=o("VU/8")(F,y,!1,function(e){o("4nl6")},"data-v-fb13fe9e",null).exports,C={name:"WebCache",data:function(){return{title:"生成cache代码",path:"web-cache",helpInfo:"\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],cacheName:[{required:!0,message:"请输入缓存名称",trigger:"blur"}],prefixKey:[{required:!0,message:"请输入缓存key前缀名称",trigger:"blur"}],keyName:[{required:!0,message:"请输入key名称",trigger:"blur"}],keyType:[{required:!0,message:"请输入key的go类型",trigger:"blur"}],valueName:[{required:!0,message:"请输入value名称",trigger:"blur"}],valueType:[{required:!0,message:"请输入value的go类型",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},S={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入module名称"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到user服务代码目录，"),o("br"),e._v("\n              这里填写user服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"缓存名称",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"缓存key前缀名称",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"冒号结尾，示例 user:token:"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"key名称",prop:"keyName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"key的go类型",prop:"keyType"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 uint64"},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType","string"==typeof t?t.trim():t)},expression:"ruleForm.keyType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"value名称",prop:"valueName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"value的go类型",prop:"valueType"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 string"},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType","string"==typeof t?t.trim():t)},expression:"ruleForm.valueType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var D=o("VU/8")(C,S,!1,function(e){o("Hnfh")},"data-v-1cb4e979",null).exports,x={name:"WebDao",data:function(){return{title:"生成dao CRUD代码",path:"web-dao",helpInfo:"\n      <p>基于表sql生成dao代码，包含了表的CRUD操作、分页查询、自定义条件查询、缓存。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      <p>2. 在handler或service调用dao代码。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},N={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var k=o("VU/8")(x,N,!1,function(e){o("S+Uh")},"data-v-a9afc18e",null).exports,z={name:"WebModel",data:function(){return{title:"生成Model代码",path:"web-model",helpInfo:"\n      <p>基于表sql生成对应go的结构体。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},A={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var R=o("VU/8")(z,A,!1,function(e){o("FygU")},"data-v-029ae93d",null).exports,q={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>⓶基于sql创建grpc服务</b> 生成了包括了CRUD api的完整微服务代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/microservice-development-sql" target="_blank">grpc服务开发(sql)</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成api模板代码、api错误码、grpc客户端测试代码、*pb.go代码:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 使用 <b>Goland</b> 或 <b>VS Code</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或者压测api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},$={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-sql",target:"_blank"}},[e._v("⓶基于sql创建grpc服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          生成完整的微服务项目代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              以后如果需要添加新的CRUD代码，可以在菜单"),o("br"),o("b",[e._v("【Public】 -> 【生成service CRUD代码】")]),o("br"),e._v("中生成代码，然后移动到项目代码中。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var T=o("VU/8")(q,$,!1,function(e){o("TIDJ")},"data-v-10cb8394",null).exports,W={name:"MicroRPCConn",data:function(){return{title:"生成grpc服务连接代码",path:"micro-rpc-conn",helpInfo:"\n      <p>grpc服务连接代码包括常用服务治理功能，例如服务发现、负载均衡、限流、熔断、链路跟踪等。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],rpcServerNames:[{required:!0,message:"请输入grpc服务名称",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},I={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入module名称"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到user服务代码目录，"),o("br"),e._v("\n              这里填写user服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"grpc服务名称",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"支持填写多个grpc服务名称"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果想生成连接多个grpc服务代码，"),o("br"),e._v("\n              多个grpc服务名称之间用"),o("b",[e._v("逗号")]),e._v("分隔。"),o("br"),e._v("\n              示例：comment,relation\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var P=o("VU/8")(W,I,!1,function(e){o("ohWW")},"data-v-df14c522",null).exports,M={name:"MicroService",data:function(){return{title:"生成service CRUD代码",path:"micro-service",helpInfo:'\n      <p>基于表sql生成的service代码，包含了表的grpc api的CRUD和测试代码，支持分页、过滤、排序查询。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>api</b>和<b>internal</b>移动到<b>⓶基于sql创建grpc服务</b>或者<b>⓸基于protobuf创建grpc服务</b>的项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 使用 <b>Goland</b> 或 <b>VS Code</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试 CRUD api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},E={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var U=o("VU/8")(M,E,!1,function(e){o("1eUx")},"data-v-554f7964",null).exports,j={name:"MicroService",data:function(){return{title:"生成service+handler CRUD代码",path:"micro-service-handler",helpInfo:'\n      <p>基于表sql生成的service+handler CRUD代码，包含了grpc+http CRUD api相关代码。</p>\n      <br />\n      <p>1. 解压文件，把文件夹<b>api</b>和<b>internal</b>移动到<b>⓺基于protobuf创建grpc+http服务</b>的项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令生成grpc和http相关代码:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 测试或压测api:<br />\n        &emsp;○ 使用 <b>Goland</b> 或 <b>VS Code</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或性能压测grpc api。<br />\n        &emsp;○ 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试http api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},B={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务目录下go.mod文件的module名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model结构体字段对应表的id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，移动到对应的服务代码下，"),o("br"),e._v("\n              不可以被其他服务代码复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              移动到对应的服务代码下，可以被其他服务代码复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var L=o("VU/8")(j,B,!1,function(e){o("ps4J")},"data-v-b21e7bd8",null).exports,H={name:"MicroProtobuf",data:function(){return{title:"生成protobuf CURD描述信息",path:"micro-protobuf",helpInfo:'\n      <p>把表sql转换为protobuf描述信息，主要包含 CRUD api。</p>\n      <br />\n      <p>解压文件，将文件夹<b>api</b>移动到项目代码文件夹下，proto文件还有下面用途：</p>\n      <p style="text-indent:2em;">● 生成swagger文档。\n      <p style="text-indent:2em;">● 作为protoc的自定义的插件生成需要的代码。\n      <p style="text-indent:2em;">● 创建web服务。\n      <p style="text-indent:2em;">● 创建grpc服务。\n      <p style="text-indent:2em;">● 创建grpc+http服务。\n      <p style="text-indent:2em;">● 创建grpc网关服务。\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据库dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},V={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("、"),o("b",[e._v("tidb")]),e._v("，填写dsn地址，"),o("br"),e._v("\n              dsn格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user和password不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写sqlite db文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"包含路由和swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果开启，生成的proto文件包含路由和swagger描述信息。"),o("br"),e._v("\n              如果关闭，则不包含路由和swagger描述信息。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的CRUD api代码。"),o("br"),e._v("\n              如果开启，在5个常用的CRUD api基础上，额外增加了4个的api，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var G=o("VU/8")(H,V,!1,function(e){o("w+96")},"data-v-276de519",null).exports,O={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>⓷基于protobuf创建的web服务</b> 生成了通用的web服务后端代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/web-development-protobuf" target="_blank">web服务开发(protobuf)</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成api模板代码、api错误码、注册路由代码、swagger文档、*pb.go文件:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/handler/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择proto文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // 完整的rpc示例\n  // rpc 注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  // 下面两种示例会忽略rpc生成web相关代码\n\n  // (1) 没有设置google.api.http和openapiv2_operation\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n\n  // (2) rpc属于stream类型\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},K={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/zh-cn/web-development-protobuf",target:"_blank"}},[e._v("⓷基于protobuf创建web服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          生成通用的web服务后端代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看proto文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择proto文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"proto文件示例",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var J=o("VU/8")(O,K,!1,function(e){o("IALf")},"data-v-0c48821c",null).exports,Y={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>⓸基于protobuf创建grpc服务</b> 生成了通用的grpc服务代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/microservice-development-protobuf" target="_blank">grpc服务开发(protobuf)</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成api模板代码、api错误码、rpc客户端测试代码、*pb.go文件:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 使用 <b>Goland</b> 或 <b>VS Code</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择proto文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\noption go_package = "edusys/api/user/v1;v1";\n\nservice user {\n  rpc Register(RegisterRequest) returns (RegisterReply) {}\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage RegisterRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage RegisterReply {\n  int64   id = 1;\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},X={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-protobuf",target:"_blank"}},[e._v("⓸基于protobuf创建grpc服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          生成通用的微服务项目代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看proto文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择proto文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"proto文件示例",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var Q=o("VU/8")(Y,X,!1,function(e){o("N6Tf")},"data-v-3f9d743a",null).exports,Z={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>⓺基于protobuf创建grpc+http服务</b> 生成了通用的grpc+http服务代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/microservice-development-mix-protobuf" target="_blank">grpc+http服务开发(protobuf)</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成grpc和http api模板代码、api错误码、http路由代码和swagger文档、grpc客户端测试代码、*pb.go代码:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 测试或压测api:<br />\n        &emsp;○ 使用 <b>Goland</b> 或 <b>VS Code</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或性能压测grpc api。<br />\n        &emsp;○ 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试http api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择proto文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // rpc示例\n  // rpc 注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n\n  // 注意：下面两类rpc会被忽略生成http相关代码\n  //    1. 在rpc没有设置google.api.http和openapiv2_operation，例如 SayHi\n  //    2.rpc属于stream类型，例如 ClientSteam、ServerSteam、BidiSteam\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ee={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/zh-cn/microservice-development-mix-protobuf",target:"_blank"}},[e._v("⓺基于protobuf创建grpc+http服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          生成通用的微服务项目代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看proto文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择proto文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"proto文件示例",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var te=o("VU/8")(Z,ee,!1,function(e){o("Fkcq")},"data-v-685dae8e",null).exports,oe={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>⓹基于protobuf创建的grpc网关服务</b> 生成了用于把http请求转换为grpc请求的服务代码，详细的开发流程请点击查看文档 <a href="https://go-sponge.com/zh-cn/rpc-gateway-development-protobuf" target="_blank">grpc网关服务开发</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成api模板代码、api错误码、注册路由代码、swagger文档、*pb.go文件：<b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务：<b style="color: green">make run</b></p>\n      <p>5. 复制 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> 到浏览器测试api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入go module名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择proto文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // 完整的rpc示例\n  // rpc 注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  // 下面两种示例会忽略rpc生成web相关代码\n\n  // (1) 没有设置google.api.http和openapiv2_operation\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n\n  // (2) rpc属于stream类型\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/zh-cn/rpc-gateway-development-protobuf",target:"_blank"}},[e._v("⓹基于protobuf创建grpc网关服务")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("生成grpc网关服务项目代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看proto文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择proto文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod文件的module名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建docker镜像、k8s的部署脚本上，如果使用docker官方"),o("br"),e._v("\n              镜像仓库，只需填写注册docker仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的服务代码适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("和"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型，即使把多个服务代码放在一个git"),o("br"),e._v("\n              仓库下，不同服务代码之间不可复用。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的服务代码适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型，"),o("br"),e._v("\n              多个服务代码放在一个git仓库下，不同服务之间的代码可以复用。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"proto文件示例",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var ie=o("VU/8")(oe,re,!1,function(e){o("+Sv5")},"data-v-0d9e158e",null).exports,le={name:"YamlConfig",data:function(){return{title:"生成config代码",path:"yaml-config",helpInfo:"\n      <p>把yaml配置转为go struct，并包含读取yaml配置的代码。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下，如果配置文件已经存在，则替换它。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"请选择yaml文件",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ae={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml文件",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("点击选择yaml文件")]),e._v("\n              或将文件拖到此处\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var se=o("VU/8")(le,ae,!1,function(e){o("YY2o")},"data-v-427c08fc",null).exports,ne={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),mircoServiceFrameworkImageSrc:o("qynW")}}},ce={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"50px","line-height":"150%"}},[e._v("\n      "+e._s(e.$t("home.text1"))+"\n    ")]),e._v(" "),o("p",[e._v("\n      Github repo:\n      "),o("a",{attrs:{href:"https://github.com/zhufuyi/sponge",target:"_blank"}},[e._v("https://github.com/zhufuyi/sponge")])]),e._v(" "),o("p",[e._v("\n      Documentation:\n      "),o("a",{attrs:{href:"https://go-sponge.com",target:"_blank"}},[e._v("https://go-sponge.com")])]),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text4")))]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[e._v(e._s(e.$t("home.text5")))]),e._v(" "),o("div",{staticClass:"microservices-image"},[o("el-image",{attrs:{src:e.mircoServiceFrameworkImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var de=o("VU/8")(ne,ce,!1,function(e){o("bkuH")},null,null).exports,me={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=document.createElement("a"),n=window.URL.createObjectURL(a);s.href=n,s.download=decodeURI(l),s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s),window.URL.revokeObjectURL(n),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},pe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"Downloaded Successfully",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("Help for use:")]),e._v(" "),o("div",{staticStyle:{padding:"10px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var ue=o("VU/8")(me,pe,!1,function(e){o("7O3S")},"data-v-73feaec2",null).exports,ve={name:"WebHTTP",data:function(){return{title:"",path:"web-http",helpInfo:'\n      <p><b>⓵Create web service based on sql</b> generates the complete web service backend code including the CRUD api, see the documentation for details of the development steps: <a href="https://go-sponge.com/web-development-sql" target="_blank">web service development (sql)</a>.</p>\n      <br />\n      <p>1. Unzip the file.</p>\n      <p>2. Open a terminal and execute the command to generate the swagger documentation:   <b style="color: green">make docs</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},be={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/web-development-sql",target:"_blank"}},[e._v("⓵Create web service based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate complete web service backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file. "),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [Generate Handler CRUD Code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var fe=o("VU/8")(ve,be,!1,function(e){o("wI93")},"data-v-1eb7fb9d",null).exports,he={name:"WebHandler",data:function(){return{title:"Generate handler CRUD code",path:"web-handler",helpInfo1:'\n      <p>Generate handler code based on sql, contains CRUD api, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folder folders <b>internal</b> to a sql based create web service project code folder.</p>\n      <p>2. open a terminal and execute the command:  <b style="color: green">make docs</b></p>\n      <p>3. compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo2:'\n      <p>Generate protobuf and handler code based on sql, contains CRUD api, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folders <b>api</b> and <b>internal</b> to a protobuf based create web service project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:  <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ge={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the "),o("b",[e._v("user")]),e._v(" service directory.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"protobuf type"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If it is disable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "⓵Create web service based on sql".'),o("br"),e._v("\n              If it is enable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "⓷Create web service based on protobuf".\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var _e=o("VU/8")(he,ge,!1,function(e){o("El04")},"data-v-1580e5e8",null).exports,Fe={name:"WebCache",data:function(){return{title:"generate cache code",path:"web-cache",helpInfo:"\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],cacheName:[{required:!0,message:"please type the cache name",trigger:"blur"}],prefixKey:[{required:!0,message:"please type the cache key prefix name",trigger:"blur"}],keyName:[{required:!0,message:"please type the key name",trigger:"blur"}],keyType:[{required:!0,message:"please type the go type of key",trigger:"blur"}],valueName:[{required:!0,message:"please type the value name",trigger:"blur"}],valueType:[{required:!0,message:"please type the go type of value",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ye={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the user service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the user service directory.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"cache name",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"cache key prefix name",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ending in a colon, e.g. user:token:"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"key name",prop:"keyName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"key type",prop:"keyType"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"the go type of key, e.g. uint64"},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType","string"==typeof t?t.trim():t)},expression:"ruleForm.keyType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"value name",prop:"valueName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"value type",prop:"valueType"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"the go type of value, e.g. string"},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType","string"==typeof t?t.trim():t)},expression:"ruleForm.valueType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var we=o("VU/8")(Fe,ye,!1,function(e){o("Uz+g")},"data-v-67c29a23",null).exports,Ce={name:"WebDao",data:function(){return{title:"Generate dao CRUD code",path:"web-dao",helpInfo:"\n      <p>Generate dao code based on table sql, contains CRUD api, arbitrary condition paging query, caching. </p>\n      <br />\n      <p>1. Move the folder <b>internal</b> to your project code folder.</p>\n      <p>2. Invoke dao code in handler or service.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Se={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the "),o("b",[e._v("user")]),e._v(" service directory.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var De=o("VU/8")(Ce,Se,!1,function(e){o("W0dD")},"data-v-db961f5e",null).exports,xe={name:"WebModel",data:function(){return{title:"Generate Model Code",path:"web-model",helpInfo:"\n      <p>Generate the corresponding go structure based on the table sql.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ne={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var ke=o("VU/8")(xe,Ne,!1,function(e){o("I0o5")},"data-v-037c1e66",null).exports,ze={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>⓶Create grpc service based on sql</b> generates a complete microservice code including CRUD api, see the documentation for detailed development steps: <a href="https://go-sponge.com/microservice-development-sql" target="_blank">GRPC service development (sql)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate API template code, API error code, grpc client test code, and * pb.go code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, test or performance test the api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ae={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/microservice-development-sql",target:"_blank"}},[e._v("⓶Create grpc service based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate complete microservices project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [generate service CRUD code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Re=o("VU/8")(ze,Ae,!1,function(e){o("Ux1E")},"data-v-5cd6ea4d",null).exports,qe={name:"MicroRPCConn",data:function(){return{title:"Generate grpc connection code",path:"micro-rpc-conn",helpInfo:"\n      <p>The grpc service connection code includes common service governance features such as service discovery, load balancing, flow limiting, melting, link tracing, etc.</p>\n      <br />\n      <p>Unzip the file and move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],rpcServerNames:[{required:!0,message:"please type the name of the grpc service",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("service name cannot be empty"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},$e={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the user service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the user service directory.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"grpc service name",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multiple grpc services support"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you want to generate code to connect multiple grpc\n              services,"),o("br"),e._v("\n              grpc service names are separated by commas."),o("br"),e._v("\n              example: service1,service2,service3\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Te=o("VU/8")(qe,$e,!1,function(e){o("oPXs")},"data-v-01e1e8e4",null).exports,We={name:"MicroService",data:function(){return{title:"Generate service CRUD code",path:"micro-service",helpInfo:'\n      <p>Generate service code based on table sql, including grpc CRUD api and test code, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the code file</p>\n      <p>2. Move the folders <b>api</b> and <b>internal</b> to your grpc service code folder.</p>\n      <p>3. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test the CRUD api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ie={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the "),o("b",[e._v("user")]),e._v(" service directory.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Pe=o("VU/8")(We,Ie,!1,function(e){o("/GIC")},"data-v-767b43d2",null).exports,Me={name:"MicroService",data:function(){return{title:"Generate service+handler CRUD code",path:"micro-service-handler",helpInfo:'\n      <p>Generate service+handler code based on table sql, the code contains grpc+http CRUD api related code.</p>\n      <br />\n      <p>1. Unzip the code file, move the folders <b>api</b> and <b>internal</b> to the project code folder "⓺create grpc+http services based on protobuf" </p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;○ Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test grpc api.<br />\n        &emsp;○ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n        ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ee={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              service code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" service code directory,"),o("br"),e._v("\n              here you fill in the name of the module in"),o("br"),e._v("\n              the go.mod file in the "),o("b",[e._v("user")]),e._v(" service directory.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated code is\n              "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". It should\n              be "),o("br"),e._v("\n              moved under the corresponding service code and cannot be "),o("br"),e._v("\n              reused by other service codes. "),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated code is "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(". "),o("br"),e._v("\n              It should be moved under the corresponding service code and\n              "),o("br"),e._v("\n              can be reused by other service codes.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Ue=o("VU/8")(Me,Ee,!1,function(e){o("9BJs")},"data-v-21c04580",null).exports,je={name:"MicroProtobuf",data:function(){var e;return e={title:"Generate protobuf CRUD description information",path:"micro-protobuf",helpInfo:'\n      <p>Converting table sql to protobuf description information, mainly contains CRUD api.</p>\n      <br />\n      <p>Move the folder <b>api</b> to your project code folder, the proto file is also used for the following purposes.: </p>\n      <p style="text-indent:2em;">● generate swagger documents.\n      <p style="text-indent:2em;">● generate the required code as a custom plug-in for protoc.\n      <p style="text-indent:2em;">● create web services.\n      <p style="text-indent:2em;">● create grpc services.\n      <p style="text-indent:2em;">● create grpc+http services.\n      <p style="text-indent:2em;">● create grpc gateway services.\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1},f()(e,"isSelectedAllTable",!1),f()(e,"dbDriverNames",[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"tidb",value:"tidb"},{label:"sqlite",value:"sqlite"}]),e},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table names success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Be={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",clearable:"",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(", "),o("b",[e._v("tidb")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"include route and swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If enabled, the generated proto file include the route and\n              "),o("br"),e._v("\n              swagger description information."),o("br"),e._v("\n              if disable, route and swagger description information are not\n              include.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD api extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Le=o("VU/8")(je,Be,!1,function(e){o("qPk4")},"data-v-5c9f53c0",null).exports,He={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>⓷Create web service based on protobuf</b> generates generic web service backend code, see the documentation for details of the development steps: <a href="https://go-sponge.com/web-development-protobuf" target="_blank">web service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute commands to generate api template code, api error code, registration route code, swagger document, *pb.go file: <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/handler/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // complete rpc example\n  // rpc comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // The following two examples ignore rpc to generate web-related code.\n\n  // (1) No settings for google.api.http and openapiv2_operation\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n\n  // (2) rpc is of type stream\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+"--server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ve={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/web-development-protobuf",target:"_blank"}},[e._v("⓷Create web service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic web service backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a proto file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Example of a proto file",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var Ge=o("VU/8")(He,Ve,!1,function(e){o("qEyF")},"data-v-1983dc2e",null).exports,Oe={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>⓸Create grpc service based on protobuf</b> generates generic grpc service code, see the documentation for details of the development steps: <a href="https://go-sponge.com/microservice-development-protobuf" target="_blank">GRPC service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute commands to generate api template code, api error code, grpc client test code, and *pb.go file:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\noption go_package = "edusys/api/user/v1;v1";\n\nservice user {\n  // rpc comments\n  rpc Register(RegisterRequest) returns (RegisterReply) {}\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage RegisterRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage RegisterReply {\n  int64   id = 1;\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ke={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/microservice-development-protobuf",target:"_blank"}},[e._v("⓸Create grpc service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic microservice project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a proto file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Example of a proto file",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var Je=o("VU/8")(Oe,Ke,!1,function(e){o("YzJg")},"data-v-4e28d7cc",null).exports,Ye={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>⓺Create grpc+http service based on protobuf</b> generates generic grpc+http service code, see the documentation for details of the development steps: <a href="https://go-sponge.com/microservice-development-mix-protobuf" target="_blank">GRPC+HTTP service development (protobuf)</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open the terminal and execute the command to generate grpc and http api template code, api error code, http routing code and swagger document, grpc client test code, * pb.go code.:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run services:   <b style="color: green">make run</b></p>\n      <p>5. Test or performance test api:<br />\n        &emsp;○ Open the file using <b>Goland</b> or <b>VS Code</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test grpc api.<br />\n        &emsp;○ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // rpc comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "log in with email",\n    };\n  }\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http and openapiv2_operation are not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Xe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/microservice-development-mix-protobuf",target:"_blank"}},[e._v("⓺Create grpc+http service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate generic microservice project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a proto file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Example of a proto file",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var Qe=o("VU/8")(Ye,Xe,!1,function(e){o("QNRZ")},"data-v-8bfa160e",null).exports,Ze={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>⓹Create grpc gateway service based on protobuf</b> generates service code for converting http requests to grpc requests, see the documentation for details of the development steps: <a href="https://go-sponge.com/rpc-gateway-development-protobuf" target="_blank">GRPC gateway service development</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute commands to generate api template code, api error code, registration route code, swagger document, *pb.go file: <b style="color: green">make proto</b></p>\n      <p>3. Open <span style="color: chocolate">internal/service/xxx.go</span> file, replace <span style="color: chocolate">panic("implement me")</span> according to template code example. </p>\n      <p>4. Compile and run services.<b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser, and test api.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the service",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.edusys.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\noption go_package = "edusys/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // complete rpc example\n  // rpc comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // The following two examples ignore rpc to generate web-related code.\n\n  // (1) No settings for google.api.http and openapiv2_operation\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n\n  // (2) rpc is of type stream\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},et={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/rpc-gateway-development-protobuf",target:"_blank"}},[e._v("⓹Create grpc gateway service based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#777","font-weight":"normal"}},[e._v("\n          generate grpc gateway service project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a proto file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"service name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-service 🡆 your_service\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default is off, it indicates that the generated service code\n              is "),o("br"),e._v("\n              suitable for both\n              "),o("b",[e._v("monolithic application repository (monolith)")]),e._v(" "),o("br"),e._v("\n              and "),o("b",[e._v("microservices multi-repository (muti-repo)")]),e._v(". Even if\n              "),o("br"),e._v("\n              multiple service codes are placed in one Git repository, they\n              "),o("br"),e._v("\n              cannot be reused among different service codes."),o("br"),o("br"),e._v("\n              When enabled, it indicates that the generated service code is\n              "),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservices monolithic repository (mono-repo)")]),e._v(", "),o("br"),e._v("\n              where multiple service codes are placed in one Git repository,\n              and "),o("br"),e._v("\n              the code between different services can be reused.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Example of a proto file",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("div",{staticClass:"showProtoDemoDiv"},[o("pre",[e._v(e._s(e.protoDemoContent))])])])],1)],1)},staticRenderFns:[]};var tt=o("VU/8")(Ze,et,!1,function(e){o("4czy")},"data-v-6829ccfa",null).exports,ot={name:"YamlConfig",data:function(){return{title:"Generate config code",path:"yaml-config",helpInfo:"\n      <p>Converts a yaml configuration to a go struct and includes code to read the yaml configuration.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder, if the configuration code already exists, replace it.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"please select a yaml file",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},rt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#666"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml file",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Click to select a yaml file")]),o("br"),e._v("\n              or drag and drop the file here\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var it=o("VU/8")(ot,rt,!1,function(e){o("WUOy")},"data-v-434d259c",null).exports;r.default.use(s.a);var lt=new s.a({mode:"history",routes:[{path:"*",redirect:"/ui"},{path:"/ui",component:d},{path:"/ui/web-http",component:_},{path:"/ui/web-handler",component:w},{path:"/ui/web-cache",component:D},{path:"/ui/web-dao",component:k},{path:"/ui/web-model",component:R},{path:"/ui/micro-rpc",component:T},{path:"/ui/micro-rpc-conn",component:P},{path:"/ui/micro-rpc-pb",component:Q},{path:"/ui/micro-grpc-http-pb",component:te},{path:"/ui/micro-rpc-gw-pb",component:ie},{path:"/ui/micro-service",component:U},{path:"/ui/micro-service-handler",component:L},{path:"/ui/micro-protobuf",component:G},{path:"/ui/web-http-pb",component:J},{path:"/ui/yaml-config",component:se},{path:"/ui/download",component:v},{path:"/en/ui",component:de},{path:"/en/ui/web-http",component:fe},{path:"/en/ui/web-handler",component:_e},{path:"/en/ui/web-cache",component:we},{path:"/en/ui/web-dao",component:De},{path:"/en/ui/web-model",component:ke},{path:"/en/ui/micro-rpc",component:Re},{path:"/en/ui/micro-rpc-conn",component:Te},{path:"/en/ui/micro-rpc-pb",component:Je},{path:"/en/ui/micro-grpc-http-pb",component:Qe},{path:"/en/ui/micro-rpc-gw-pb",component:tt},{path:"/en/ui/micro-service",component:Pe},{path:"/en/ui/micro-service-handler",component:Ue},{path:"/en/ui/micro-protobuf",component:Le},{path:"/en/ui/web-http-pb",component:Ge},{path:"/en/ui/yaml-config",component:it},{path:"/en/ui/download",component:ue}]}),at=(o("tvR6"),o("zL8q")),st=o.n(at),nt=o("Dd8w"),ct=o.n(nt),dt=o("TXmL"),mt=o("wUZ8"),pt=o.n(mt),ut=o("Vi3T"),vt=o.n(ut);r.default.use(dt.a);var bt={en:ct()({},pt.a,{navMenu:{webType:"Web",webHttp:"Create web service",microRpc:"Create grpc service",microType:"Microservice",webHttpPb:"Create web service",microRpcGwPb:"Create grpc gateway service",microrpcPb:"Create grpc service",microGRPCHTTPPb:"Create grpc+http service",microServiceHandler:"Generate service+handler CRUD code",microService:"Generate service CRUD code",wehHandler:"Generate handler CRUD code",webDao:"Generate dao CRUD code",webModel:"Generate model code",microProtobuf:"Generate protobuf CRUD code",yamlConfig:"Generate configuration code",microRpcConn:"Generate grpc connection code",webCache:"Generate cache code"},footer:{text1:"If it helps you, give it a ",text2:"",text3:""},home:{text1:'Sponge is a powerful basic development framework that integrates automatic code generation, Gin and GRPC. Sponge has a rich set of code generation commands, generating different functional code can be combined into a complete service (similar to the way that artificially broken sponge cells can automatically recombine into a new sponge). From development, testing, API documentation to deployment, one-stop project development greatly improves development efficiency and reduces development difficulty, implementation of "low-code way" development projects.',text2:"Github: ",text3:"Documentation: ",text3_1:"Video tutorials: ",text3_2:"",text4:"The code generation framework is shown in the following figure, it corresponding to the menu on the left. There are mainly two ways to generate code based on sql and protobuf. sql supports databases mysql, mongodb, postgresql, tidb and sqlite.",text4_1:"The service code created by sponge supports two types of project code repositories: 1.monolithic application repository (monolith) or microservices multi-repository (multi-repo), 2.microservices monolithic repository (mono-repo).",text5:"The code for sponge creation service corresponds to the framework diagram:"}}),cn:ct()({},vt.a,{navMenu:{webType:"Web",webHttp:"创建web服务",wehHandler:"生成handler CRUD代码",microType:"微服务",microRpc:"创建grpc服务",microService:"生成service CRUD代码",webHttpPb:"创建web服务",microRpcGwPb:"创建grpc网关服务",microrpcPb:"创建grpc服务",microGRPCHTTPPb:"创建grpc+http服务",microServiceHandler:"生成service+handler CRUD代码",webDao:"生成dao CRUD代码",webModel:"生成model代码",microProtobuf:"生成protobuf CRUD代码",yamlConfig:"生成config代码",microRpcConn:"生成grpc服务连接代码",webCache:"生成cache代码"},footer:{text1:"如果对您有帮助给个",text2:" ，欢迎加入",text3:"go sponge微信交流群。"},home:{text1:'sponge 是一个集成了 自动生成代码、Gin和GRPC 的强大的开发框架。sponge拥有丰富的生成代码命令，生成不同的功能代码可以组合成完整的服务(类似人为打散的海绵细胞可以自动重组成一个新的海绵)。从开发、测试、api文档到部署一站式项目开发，大幅提高了开发效率和降低了开发难度，实现"低代码方式"开发项目。',text2:"github地址：",text3:"开发文档：",text3_1:"视频教程：",text3_2:"  (注：视频教程演示使用sponge v1.3.12版本，后续的版本增加了一些自动化功能、调整了一些UI界面和菜单，建议结合文档教程使用。)",text4:"生成代码框架如下图所示，主要有sql和protobuf两种方式生成代码，其中sql支持数据库mysql、mongodb、postgresql、tidb、sqlite。",text4_1:"sponge创建的服务代码支持两种类型代码仓库：1.单体应用单体仓库(monolith)或微服务多仓库(multi-repo)； 2.微服务单体仓库(mono-repo)。",text5:"sponge创建的服务代码对应框架图："}})},ft=new dt.a({locale:"cn",messages:bt});r.default.use(st.a,{i18n:function(e,t){return ft.t(e,t)}}),r.default.config.productionTip=!1,new r.default({el:"#app",i18n:ft,router:lt,components:{App:a},template:"<App/>"})},QNRZ:function(e,t){},"S+Uh":function(e,t){},TIDJ:function(e,t){},Ux1E:function(e,t){},"Uz+g":function(e,t){},W0dD:function(e,t){},WUOy:function(e,t){},X4KW:function(e,t,o){e.exports=o.p+"static/img/sponge-framework.156d59d.png"},YY2o:function(e,t){},YzJg:function(e,t){},bkuH:function(e,t){},ebUW:function(e,t,o){e.exports=o.p+"static/img/wechat.4ce8c69.jpg"},hIB5:function(e,t,o){e.exports=o.p+"static/img/go-sponge-logo.8d1efd3.png"},oPXs:function(e,t){},ohWW:function(e,t){},ps4J:function(e,t){},qEyF:function(e,t){},qPk4:function(e,t){},qynW:function(e,t,o){e.exports=o.p+"static/img/microservices-framework.688c170.png"},tvR6:function(e,t){},"w+96":function(e,t){},wI93:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2a0e0538779463e3e815.js.map